# Royal Stats: Hero-only Покерный Трекер

## Что это за программа?

Royal Stats — это специализированный десктопный трекер для игроков в онлайн-покер, сфокусированный исключительно на анализе статистики вашего игрового персонажа (Hero). Программа анализирует стандартные файлы истории рук (Hand History - HH) и итогов турниров (Tournament Summary - TS), предоставляемые покерными румами, для расчета и визуализации ключевых показателей вашей игры.

В отличие от комплексных трекеров, анализирующих всех участников за столом, Royal Stats предназначен для быстрого получения персональной статистики, особенно в турнирах формата Knockout (KO) или Bounty Builder, где критически важен подсчет выбитых игроков.

## Зачем нужна эта программа?

Royal Stats помогает глубоко понять ваши результаты в турнирах, предоставляя ответы на ключевые вопросы:

### Эффективность KO игры:
- **Общие нокауты**: Подсчет всех выбитых вами игроков
- **"Большие" нокауты**: Анализ ценных bounty, превышающих бай-ин в 1.5x, 2x, 10x, 100x, 1000x и даже 10000x раз
- **KO на турнир**: Среднее количество нокаутов за турнир

### Анализ финального стола:
- **Частота достижения**: Процент турниров, где вы дошли до финального стола (9-max)
- **Распределение мест**: Гистограмма ваших финишных позиций с 1-го по 9-е место
- **Стартовый стек**: Средний стек (в фишках и больших блайндах) в первой раздаче финалки
- **Конверсия стека**: Эффективность преобразования стартового стека в призовые места

### Специализированная аналитика:
- **Ранняя финалка (9-6 игроков)**: Анализ эффективности на стадии с меньшим ICM-давлением
- **Pre-FT KO**: Нокауты, полученные до достижения финального стола
- **Средние места**: Общие и отдельно для турниров с финалкой и без

### Финансовые показатели:
- **ROI**: Возврат инвестиций
- **ITM%**: Процент призовых мест
- **Общая прибыльность**: Соотношение бай-инов и выплат

## Как это работает?

### 1. Импорт данных
Загружайте файлы истории рук (.txt, .hh, .log) и итогов турниров (.ts, .summary) через удобный интерфейс:
- Импорт отдельных файлов
- Массовый импорт целых папок (включая подпапки)
- Прогресс-бар для отслеживания процесса

### 2. Обработка данных
Специализированные парсеры извлекают релевантную информацию:
- **HH парсер**: ID турнира, раздачи финального стола, ваш стек, сделанные KO
- **TS парсер**: Место, выплата, бай-ин, название турнира, дата
- **Объединение**: Программа автоматически связывает данные одного турнира из разных файлов

### 3. Хранение в базе данных
Данные сохраняются в локальную SQLite базу с продуманной структурой:
- **Турниры**: Агрегированная информация по каждому турниру
- **Раздачи финалки**: Детальные данные каждой руки на финальном столе
- **Сессии**: Группировка импортов с метаданными
- **Статистика**: Предрассчитанные агрегированные показатели

### 4. Расчет статистики
Модульная система статистических плагинов рассчитывает:
- Базовые агрегаты (количества, суммы, средние)
- Специализированные метрики (Big KO, ранняя финалка)
- Финансовые показатели (ROI, ITM)
- Распределения (места на финалке)

### 5. Визуализация
Интуитивный интерфейс отображает:
- **Карточки статистики**: Ключевые показатели с цветовой индикацией
- **Гистограммы**: Распределение финишных мест
- **Таблицы**: Детальные списки турниров и сессий
- **Фильтрация**: Возможность сортировки и поиска

## Архитектура и технические особенности

### Современная событийная архитектура:
- **UI Layer**: Интерфейс пользователя (PyQt6) с паттерном ViewModel
- **Service Layer**: Модульные сервисы с единой точкой входа через AppFacade
- **Event Bus**: Слабосвязанная коммуникация между компонентами
- **Domain Layer**: Типизированные модели данных с базовыми классами
- **Data Access Layer**: Репозитории с общей логикой через BaseRepository
- **Infrastructure Layer**: Стандартизированные парсеры, менеджер БД

### Управление базами данных:
- Создание отдельных баз для разных игроков
- Переключение между базами
- Запоминание последней использованной базы
- Возможность удаления и архивирования

### Определения и логика:
- **Финальный стол**: Строго 9-max независимо от уровня блайндов
- **Ранняя финалка**: Стадия от 9 до 6 игроков
- **Логика KO**: Игрок выбит Hero, если ушел в олл-ин, Hero покрывал его стек и выиграл банк

## Основные возможности

### Импорт и обработка:
- Поддержка различных форматов файлов HH и TS
- Массовый импорт папок с автоматическим обходом подпапок
- Система сессий для группировки импортов
- Защита от дублирования данных

### Статистическая аналитика:
- 20+ автономных статистических плагинов
- Инкрементальное обновление статистики для больших баз данных
- Трехуровневое кэширование (память, БД, файл)
- Плагинная архитектура с единым интерфейсом BaseStat
- Оптимизированные SQL-запросы с составными индексами

### Интерфейс и UX:
- Темная тема интерфейса
- Адаптивная компоновка
- Асинхронная загрузка данных
- Прогресс-индикаторы для длительных операций

### Управление данными:
- Множественные базы данных
- Экспорт статистики
- Резервное копирование
- Очистка и оптимизация данных

Royal Stats — ваш профессиональный инструмент для глубокого анализа собственной игры в KO турнирах, помогающий выявить сильные стороны и области для улучшения через детальную статистику и визуализацию.